# First Run Wizard - é¦–æ¬¡å¯åŠ¨å‘å¯¼

## æ¦‚è¿°

é¦–æ¬¡å¯åŠ¨å‘å¯¼æ˜¯ä¸€ä¸ªç”¨æˆ·å‹å¥½çš„ç•Œé¢ï¼Œç”¨äºå¼•å¯¼ç”¨æˆ·å®Œæˆä»å•å®ä¾‹æ¶æ„åˆ°å¤šå®ä¾‹æ¶æ„çš„æ•°æ®è¿ç§»ã€‚

## ç•Œé¢é¢„è§ˆ

### æ­¥éª¤ 1: æ¬¢è¿ç•Œé¢

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                            â”‚
â”‚  ğŸ‰ æ¬¢è¿ä½¿ç”¨ WhatsApp Desktop                              â”‚
â”‚     å¤šè´¦å·ç®¡ç†ï¼Œè®©æ²Ÿé€šæ›´é«˜æ•ˆ                                â”‚
â”‚                                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                            â”‚
â”‚  æ¬¢è¿å‡çº§åˆ°å¤šè´¦å·ç‰ˆæœ¬ï¼                                     â”‚
â”‚                                                            â”‚
â”‚  æˆ‘ä»¬æ£€æµ‹åˆ°æ‚¨ä¹‹å‰ä½¿ç”¨çš„æ˜¯å•è´¦å·ç‰ˆæœ¬ã€‚ç°åœ¨ï¼Œæ‚¨å¯ä»¥åŒæ—¶        â”‚
â”‚  ç®¡ç†å¤šä¸ª WhatsApp è´¦å·äº†ï¼                                â”‚
â”‚                                                            â”‚
â”‚  âœ“ å¤šè´¦å·æ”¯æŒ                                              â”‚
â”‚    åŒæ—¶è¿è¡Œå¤šä¸ª WhatsApp è´¦å·ï¼Œæ¯ä¸ªè´¦å·ç‹¬ç«‹è¿è¡Œ             â”‚
â”‚                                                            â”‚
â”‚  âœ“ å®Œå…¨éš”ç¦»                                                â”‚
â”‚    æ¯ä¸ªè´¦å·æ‹¥æœ‰ç‹¬ç«‹çš„å­˜å‚¨ç©ºé—´å’Œç½‘ç»œé…ç½®                      â”‚
â”‚                                                            â”‚
â”‚  âœ“ ä»£ç†æ”¯æŒ                                                â”‚
â”‚    ä¸ºæ¯ä¸ªè´¦å·é…ç½®ç‹¬ç«‹çš„ä»£ç†ï¼Œå®ç° IP éš”ç¦»                   â”‚
â”‚                                                            â”‚
â”‚  âœ“ ç¿»è¯‘åŠŸèƒ½                                                â”‚
â”‚    ä¿ç•™æ‰€æœ‰ç°æœ‰çš„ç¿»è¯‘åŠŸèƒ½ï¼Œæ”¯æŒæ¯ä¸ªè´¦å·ç‹¬ç«‹é…ç½®              â”‚
â”‚                                                            â”‚
â”‚  â„¹ï¸ æ•°æ®è¿ç§»è¯´æ˜ï¼š                                         â”‚
â”‚    æˆ‘ä»¬å°†è‡ªåŠ¨è¿ç§»æ‚¨ç°æœ‰çš„ä¼šè¯æ•°æ®å’Œç¿»è¯‘é…ç½®ã€‚åŸå§‹æ•°æ®        â”‚
â”‚    å°†è¢«ä¿ç•™ä½œä¸ºå¤‡ä»½ï¼Œæ•´ä¸ªè¿‡ç¨‹å®‰å…¨å¯é ã€‚                      â”‚
â”‚                                                            â”‚
â”‚  ğŸ“š ç›¸å…³æ–‡æ¡£                                               â”‚
â”‚    â€¢ ç”¨æˆ·æŒ‡å—                                              â”‚
â”‚    â€¢ è¿ç§»æŒ‡å—                                              â”‚
â”‚    â€¢ å¸¸è§é—®é¢˜                                              â”‚
â”‚                                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                            â”‚
â”‚                                    [ å¼€å§‹è¿ç§» ]            â”‚
â”‚                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ­¥éª¤ 2: è¿ç§»è¿›åº¦

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                            â”‚
â”‚  ğŸ‰ æ¬¢è¿ä½¿ç”¨ WhatsApp Desktop                              â”‚
â”‚     å¤šè´¦å·ç®¡ç†ï¼Œè®©æ²Ÿé€šæ›´é«˜æ•ˆ                                â”‚
â”‚                                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                            â”‚
â”‚  æ­£åœ¨è¿ç§»æ•°æ®...                                           â”‚
â”‚                                                            â”‚
â”‚  è¿ç§»è¿›åº¦                                                  â”‚
â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 60%        â”‚
â”‚                                                            â”‚
â”‚  âœ“ åˆ›å»º profiles ç›®å½•                                      â”‚
â”‚  âœ“ è¿ç§»ä¼šè¯æ•°æ®                                            â”‚
â”‚  â—‰ åŠ è½½ç¿»è¯‘é…ç½®                                            â”‚
â”‚  â—‹ åˆ›å»ºé»˜è®¤è´¦å·                                            â”‚
â”‚  â—‹ å®Œæˆè¿ç§»                                                â”‚
â”‚                                                            â”‚
â”‚                                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                            â”‚
â”‚                                                            â”‚
â”‚                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ­¥éª¤ 3: å®Œæˆç•Œé¢

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                            â”‚
â”‚  ğŸ‰ æ¬¢è¿ä½¿ç”¨ WhatsApp Desktop                              â”‚
â”‚     å¤šè´¦å·ç®¡ç†ï¼Œè®©æ²Ÿé€šæ›´é«˜æ•ˆ                                â”‚
â”‚                                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                            â”‚
â”‚  ğŸŠ è¿ç§»å®Œæˆï¼                                             â”‚
â”‚                                                            â”‚
â”‚  âœ… æ­å–œï¼æ‚¨çš„æ•°æ®å·²æˆåŠŸè¿ç§»åˆ°æ–°çš„å¤šè´¦å·æ¶æ„ã€‚              â”‚
â”‚                                                            â”‚
â”‚  æ‚¨ç°åœ¨å¯ä»¥ï¼š                                              â”‚
â”‚                                                            â”‚
â”‚  âœ“ åœ¨ä¸»ç•Œé¢æŸ¥çœ‹å’Œç®¡ç†æ‰€æœ‰è´¦å·                              â”‚
â”‚                                                            â”‚
â”‚  âœ“ æ·»åŠ æ–°çš„ WhatsApp è´¦å·                                 â”‚
â”‚                                                            â”‚
â”‚  âœ“ ä¸ºæ¯ä¸ªè´¦å·é…ç½®ç‹¬ç«‹çš„ä»£ç†å’Œç¿»è¯‘è®¾ç½®                       â”‚
â”‚                                                            â”‚
â”‚  âœ“ åŒæ—¶è¿è¡Œå¤šä¸ªè´¦å·ï¼Œæé«˜å·¥ä½œæ•ˆç‡                          â”‚
â”‚                                                            â”‚
â”‚  â„¹ï¸ æç¤ºï¼šæ‚¨çš„åŸå§‹æ•°æ®å·²è¢«ä¿ç•™åœ¨ session-data/ ç›®å½•ä¸­      â”‚
â”‚    ä½œä¸ºå¤‡ä»½ã€‚                                              â”‚
â”‚                                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                            â”‚
â”‚                                    [ å¼€å§‹ä½¿ç”¨ ]            â”‚
â”‚                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ä½¿ç”¨æµç¨‹

### 1. åº”ç”¨å¯åŠ¨æ—¶è‡ªåŠ¨æ£€æµ‹

```javascript
app.whenReady().then(async () => {
  const wizardResult = await checkAndShowWizard({
    userDataPath: app.getPath('userData'),
    onComplete: () => initializeApplication(),
    onSkip: () => initializeApplication()
  });

  if (!wizardResult.shown) {
    initializeApplication();
  }
});
```

### 2. ç”¨æˆ·äº¤äº’æµç¨‹

```
ç”¨æˆ·å¯åŠ¨åº”ç”¨
    â†“
æ£€æµ‹æ˜¯å¦éœ€è¦è¿ç§»
    â†“
    â”œâ”€ ä¸éœ€è¦ â†’ ç›´æ¥å¯åŠ¨ä¸»åº”ç”¨
    â”‚
    â””â”€ éœ€è¦ â†’ æ˜¾ç¤ºå‘å¯¼
            â†“
        æ­¥éª¤ 1: æ¬¢è¿ç•Œé¢
            â†“
        ç”¨æˆ·ç‚¹å‡»"å¼€å§‹è¿ç§»"
            â†“
        æ­¥éª¤ 2: è¿ç§»è¿›åº¦
            â†“
        è‡ªåŠ¨æ‰§è¡Œè¿ç§»
            â†“
            â”œâ”€ æˆåŠŸ â†’ æ­¥éª¤ 3: å®Œæˆç•Œé¢
            â”‚           â†“
            â”‚       ç”¨æˆ·ç‚¹å‡»"å¼€å§‹ä½¿ç”¨"
            â”‚           â†“
            â”‚       å¯åŠ¨ä¸»åº”ç”¨
            â”‚
            â””â”€ å¤±è´¥ â†’ æ˜¾ç¤ºé”™è¯¯
                        â†“
                    æä¾›é‡è¯•é€‰é¡¹
```

## æŠ€æœ¯ç‰¹æ€§

### 1. è‡ªåŠ¨æ£€æµ‹æœºåˆ¶

- æ£€æŸ¥ `.migration-completed` æ ‡è®°æ–‡ä»¶
- æ£€æŸ¥æ—§çš„ `session-data` ç›®å½•
- æ£€æŸ¥æ–°çš„ `profiles` ç›®å½•
- åªåœ¨éœ€è¦æ—¶æ˜¾ç¤ºå‘å¯¼

### 2. å®‰å…¨è¿ç§»

- ä½¿ç”¨å¤åˆ¶è€Œä¸æ˜¯ç§»åŠ¨
- ä¿ç•™åŸå§‹æ•°æ®ä½œä¸ºå¤‡ä»½
- åŸå­æ€§æ“ä½œï¼Œå¤±è´¥ä¸å½±å“åŸæ•°æ®
- åˆ›å»ºè¿ç§»æ ‡è®°é˜²æ­¢é‡å¤è¿ç§»

### 3. ç”¨æˆ·ä½“éªŒ

- æ¸…æ™°çš„è§†è§‰è®¾è®¡
- å®æ—¶è¿›åº¦åé¦ˆ
- è¯¦ç»†çš„æ­¥éª¤è¯´æ˜
- å‹å¥½çš„é”™è¯¯æç¤º
- å¿«é€Ÿè®¿é—®æ–‡æ¡£

### 4. çµæ´»é›†æˆ

æä¾›ä¸‰ç§é›†æˆæ–¹å¼ï¼š

**æ–¹å¼ 1: æ˜¾ç¤ºå‘å¯¼ï¼ˆæ¨èï¼‰**
```javascript
await checkAndShowWizard({
  userDataPath,
  onComplete: () => initApp(),
  onSkip: () => initApp()
});
```

**æ–¹å¼ 2: é™é»˜è¿ç§»**
```javascript
await autoMigrate({
  userDataPath,
  silent: true
});
```

**æ–¹å¼ 3: æ··åˆæ¨¡å¼**
```javascript
const result = await autoMigrate({ userDataPath, silent: true });
if (!result.migrated && result.result?.success === false) {
  await checkAndShowWizard({ userDataPath, ... });
}
```

## è¿ç§»å†…å®¹

### æ•°æ®è¿ç§»

```
session-data/session/
â”œâ”€â”€ Cookies              â†’ profiles/default/Cookies
â”œâ”€â”€ Local Storage/       â†’ profiles/default/Local Storage/
â”œâ”€â”€ IndexedDB/           â†’ profiles/default/IndexedDB/
â”œâ”€â”€ Cache/               â†’ profiles/default/Cache/
â””â”€â”€ ...                  â†’ profiles/default/...
```

### é…ç½®è¿ç§»

```
enable-translation-config.json
    â†“
accounts.json
{
  "accounts": {
    "default": {
      "id": "default",
      "name": "Default Account",
      "translation": {
        "enabled": true,
        "engine": "google",
        "targetLanguage": "zh-CN",
        ...
      }
    }
  }
}
```

## é”™è¯¯å¤„ç†

### å¸¸è§é”™è¯¯åœºæ™¯

1. **æƒé™ä¸è¶³**
   - æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯
   - æç¤ºç”¨æˆ·æ£€æŸ¥æƒé™
   - æä¾›é‡è¯•é€‰é¡¹

2. **ç£ç›˜ç©ºé—´ä¸è¶³**
   - æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯
   - æç¤ºæ‰€éœ€ç©ºé—´
   - å»ºè®®æ¸…ç†ç£ç›˜

3. **æ•°æ®æŸå**
   - æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯
   - æä¾›è·³è¿‡é€‰é¡¹
   - è®°å½•è¯¦ç»†æ—¥å¿—

4. **ç½‘ç»œé—®é¢˜**
   - ä¸å½±å“æœ¬åœ°è¿ç§»
   - åªå½±å“æ–‡æ¡£é“¾æ¥è®¿é—®

## æµ‹è¯•åœºæ™¯

### åœºæ™¯ 1: é¦–æ¬¡å®‰è£…

```
çŠ¶æ€: æ— æ—§æ•°æ®ï¼Œæ— æ–°æ•°æ®
ç»“æœ: ä¸æ˜¾ç¤ºå‘å¯¼ï¼Œç›´æ¥å¯åŠ¨
```

### åœºæ™¯ 2: ä»æ—§ç‰ˆæœ¬å‡çº§

```
çŠ¶æ€: æœ‰æ—§æ•°æ®ï¼Œæ— æ–°æ•°æ®
ç»“æœ: æ˜¾ç¤ºå‘å¯¼ï¼Œæ‰§è¡Œè¿ç§»
```

### åœºæ™¯ 3: å·²å®Œæˆè¿ç§»

```
çŠ¶æ€: æœ‰è¿ç§»æ ‡è®°
ç»“æœ: ä¸æ˜¾ç¤ºå‘å¯¼ï¼Œç›´æ¥å¯åŠ¨
```

### åœºæ™¯ 4: è¿ç§»å¤±è´¥

```
çŠ¶æ€: è¿ç§»è¿‡ç¨‹ä¸­å‡ºé”™
ç»“æœ: æ˜¾ç¤ºé”™è¯¯ï¼Œæä¾›é‡è¯•
```

## æ€§èƒ½æŒ‡æ ‡

- **æ£€æµ‹æ—¶é—´**: < 50ms
- **ç•Œé¢åŠ è½½**: < 200ms
- **è¿ç§»æ—¶é—´**: 500ms - 3sï¼ˆå–å†³äºæ•°æ®å¤§å°ï¼‰
- **æ€»ä½“æ—¶é—´**: < 5sï¼ˆå…¸å‹åœºæ™¯ï¼‰

## ç›¸å…³æ–‡æ¡£

- [ä½¿ç”¨æ–‡æ¡£](../src/container/FIRST_RUN_WIZARD_README.md)
- [è¿ç§»æŒ‡å—](MIGRATION_GUIDE.md)
- [è¿ç§»æµç¨‹å›¾](MIGRATION_FLOW.md)
- [é›†æˆç¤ºä¾‹](../src/examples/first-run-wizard-integration-example.js)

## ç»´æŠ¤å»ºè®®

1. **å®šæœŸæµ‹è¯•**: åœ¨æ¯ä¸ªç‰ˆæœ¬å‘å¸ƒå‰æµ‹è¯•è¿ç§»æµç¨‹
2. **æ”¶é›†åé¦ˆ**: è®°å½•ç”¨æˆ·é‡åˆ°çš„é—®é¢˜
3. **æ›´æ–°æ–‡æ¡£**: ä¿æŒæ–‡æ¡£ä¸ä»£ç åŒæ­¥
4. **æ€§èƒ½ç›‘æ§**: ç›‘æ§è¿ç§»æ—¶é—´å’ŒæˆåŠŸç‡
5. **é”™è¯¯åˆ†æ**: åˆ†æå¸¸è§é”™è¯¯å¹¶æ”¹è¿›

## æœªæ¥æ”¹è¿›

- [ ] æ·»åŠ å¤šè¯­è¨€æ”¯æŒ
- [ ] æ”¯æŒè‡ªå®šä¹‰ä¸»é¢˜
- [ ] æ˜¾ç¤ºé¢„è®¡å‰©ä½™æ—¶é—´
- [ ] æä¾›å›æ»šåŠŸèƒ½
- [ ] é›†æˆå¸®åŠ©ç³»ç»Ÿ
- [ ] æ·»åŠ è¿ç§»æ—¥å¿—æŸ¥çœ‹å™¨
