# 发布检查清单

使用此清单确保每次发布都经过完整的测试和验证。

## 发布前准备

### 代码质量

- [ ] 所有测试通过 (`npm test`)
- [ ] 代码检查通过 (`npm run lint`)
- [ ] 测试覆盖率 > 80%
- [ ] 没有已知的严重 Bug
- [ ] 代码审查完成

### 文档更新

- [ ] 更新 README.md
- [ ] 更新 CHANGELOG.md
- [ ] 更新用户指南（如有新功能）
- [ ] 更新 API 文档（如有 API 变更）
- [ ] 更新版本号（package.json）

### 功能验证

- [ ] 消息自动翻译正常工作
- [ ] 输入框翻译正常工作
- [ ] 所有翻译引擎可用
- [ ] 好友独立配置正常工作
- [ ] 禁发中文功能正常工作
- [ ] 实时翻译预览正常工作
- [ ] 反向翻译验证正常工作
- [ ] 设置面板正常工作
- [ ] 缓存系统正常工作

### 性能测试

- [ ] 翻译响应时间 < 2s
- [ ] 缓存命中率 > 60%
- [ ] 内存占用 < 150MB
- [ ] CPU 占用 < 5%（空闲时）
- [ ] 无内存泄漏

### 安全检查

- [ ] API 密钥加密存储
- [ ] 无 XSS 漏洞
- [ ] 无 SQL 注入漏洞
- [ ] HTTPS 连接验证
- [ ] 敏感信息不记录到日志

## 构建和测试

### Windows

- [ ] 构建成功 (`npm run build:win`)
- [ ] NSIS 安装程序可以安装
- [ ] 便携版可以运行
- [ ] 所有功能正常
- [ ] 卸载程序正常工作
- [ ] 代码签名有效（如果已签名）

### macOS

- [ ] 构建成功 (`npm run build:mac`)
- [ ] DMG 文件可以挂载
- [ ] 应用可以拖动到 Applications
- [ ] Intel 版本正常运行
- [ ] Apple Silicon 版本正常运行
- [ ] 代码签名有效
- [ ] 公证成功（如果已公证）

### Linux

- [ ] 构建成功 (`npm run build:linux`)
- [ ] AppImage 可以运行
- [ ] DEB 包可以安装
- [ ] RPM 包可以安装
- [ ] 所有依赖正确
- [ ] 桌面图标显示正常

## 发布流程

### Git 操作

- [ ] 创建发布分支 (`git checkout -b release/v1.0.0`)
- [ ] 提交所有更改
- [ ] 创建 Git 标签 (`git tag -a v1.0.0 -m "Release v1.0.0"`)
- [ ] 推送标签 (`git push origin v1.0.0`)
- [ ] 合并到主分支

### GitHub Release

- [ ] 创建 GitHub Release
- [ ] 填写 Release 标题
- [ ] 填写 Release 说明（从 CHANGELOG 复制）
- [ ] 上传 Windows 安装包
- [ ] 上传 macOS DMG 文件
- [ ] 上传 Linux AppImage/DEB/RPM
- [ ] 上传 SHA256 校验和文件
- [ ] 标记为 Pre-release（如果是测试版）
- [ ] 发布 Release

### 验证发布

- [ ] 下载并测试 Windows 安装包
- [ ] 下载并测试 macOS DMG
- [ ] 下载并测试 Linux AppImage
- [ ] 验证自动更新功能（如果已实现）
- [ ] 检查 Release 页面显示正常

## 发布后

### 通知

- [ ] 在 GitHub Discussions 发布公告
- [ ] 更新项目网站（如果有）
- [ ] 发送邮件通知（如果有邮件列表）
- [ ] 在社交媒体发布（如果有）

### 监控

- [ ] 监控 GitHub Issues 中的新问题
- [ ] 监控用户反馈
- [ ] 检查崩溃报告（如果已实现）
- [ ] 监控下载量

### 文档

- [ ] 更新在线文档
- [ ] 更新 Wiki（如果有）
- [ ] 更新 FAQ（根据用户反馈）

## 紧急情况

### 如果发现严重 Bug

1. [ ] 立即标记 Release 为 "有问题"
2. [ ] 在 Release 说明中添加警告
3. [ ] 创建 Hotfix 分支
4. [ ] 修复 Bug
5. [ ] 发布补丁版本

### 回滚流程

1. [ ] 删除有问题的 Release
2. [ ] 删除 Git 标签
3. [ ] 通知用户不要下载
4. [ ] 修复问题后重新发布

## 版本类型

### 主版本发布 (1.0.0 -> 2.0.0)

- [ ] 完成所有上述检查
- [ ] 额外的兼容性测试
- [ ] 迁移指南（如有破坏性更改）
- [ ] 提前通知用户

### 次版本发布 (1.0.0 -> 1.1.0)

- [ ] 完成所有上述检查
- [ ] 新功能文档
- [ ] 功能演示视频（可选）

### 修订版发布 (1.0.0 -> 1.0.1)

- [ ] 完成基本检查
- [ ] Bug 修复验证
- [ ] 快速发布

## 自动化检查

如果使用 CI/CD，确保：

- [ ] CI 构建通过
- [ ] 所有自动化测试通过
- [ ] 代码覆盖率达标
- [ ] 安全扫描通过
- [ ] 依赖漏洞扫描通过

## 签名

发布负责人签名确认：

- 发布版本: v______
- 发布日期: ______
- 负责人: ______
- 签名: ______

---

**注意**: 此检查清单应该在每次发布前完整执行。不要跳过任何步骤！
