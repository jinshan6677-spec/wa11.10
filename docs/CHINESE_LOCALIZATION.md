# WhatsApp 桌面版多账号 - 中文本地化

## 概述

本文档记录了应用程序界面的中文本地化更改。

## 已本地化的文件

### 1. 主界面 (src/single-window/renderer/app.html)

**更改内容：**
- 页面语言：`lang="zh-CN"`
- 标题：`WhatsApp 桌面版 - 多账号`
- 侧边栏标题：`账号列表`
- 添加按钮：`添加`
- 空状态提示：
  - `暂无账号`
  - `点击上方"添加"按钮创建您的第一个 WhatsApp 账号。`
- 欢迎消息：
  - `欢迎使用 WhatsApp 桌面版`
  - `从侧边栏选择一个账号开始使用，或添加新账号。`

### 2. 账号配置对话框 (src/single-window/renderer/accountDialog.html)

**更改内容：**

#### 基本信息
- 对话框标题：`添加账号` / `编辑账号`
- 关闭按钮：`关闭对话框`
- 章节标题：`基本信息`
- 账号名称：`账号名称`（必填）
- 占位符：`例如：个人 WhatsApp`
- 提示：`用于识别此账号的友好名称`
- 备注：`备注（可选）`
- 占位符：`例如：客服工作账号`
- 提示：`关于此账号的附加说明`

#### 代理配置
- 章节标题：`代理配置`
- 启用代理：`启用代理`
- 提示：`通过代理服务器路由此账号的流量`
- 协议：`协议`
- 提示：`代理协议类型`
- 主机地址：`主机地址`（必填）
- 占位符：`例如：127.0.0.1`
- 端口：`端口`（必填）
- 占位符：`例如：1080`
- 身份验证：`代理需要身份验证`
- 用户名：`用户名`
- 占位符：`代理用户名`
- 密码：`密码`
- 占位符：`代理密码`
- 绕过规则：`绕过规则（可选）`
- 占位符：`例如：localhost,127.0.0.1`
- 提示：`逗号分隔的绕过代理的主机列表`

#### 翻译设置
- 章节标题：`翻译设置`
- 启用翻译：`启用翻译`
- 提示：`自动翻译此账号中的消息`
- 翻译引擎：`翻译引擎`
- 选项：
  - `谷歌翻译（免费）`
  - `GPT-4（需要 API 密钥）`
  - `Google Gemini（需要 API 密钥）`
  - `DeepSeek（需要 API 密钥）`
- 提示：`选择您首选的翻译服务`
- 目标语言：`目标语言`
- 语言选项：
  - `简体中文`
  - `繁体中文`
  - `英语`
  - `西班牙语`
  - `法语`
  - `德语`
  - `日语`
  - `韩语`
  - `葡萄牙语`
  - `俄语`
  - `阿拉伯语`
  - `印地语`
  - `意大利语`
  - `荷兰语`
  - `波兰语`
  - `土耳其语`
  - `越南语`
  - `泰语`
- 提示：`将消息翻译成的目标语言`
- API 密钥：`API 密钥`（必填）
- 占位符：`输入您的 API 密钥`
- 提示：`付费翻译服务所需`
- 自动翻译：`自动翻译接收的消息`
- 翻译输入：`翻译发送的消息`

#### 其他设置
- 章节标题：`其他设置`
- 自动启动：`应用启动时自动启动此账号`

#### 表单操作
- 错误提示：`请修复以下错误：`
- 取消按钮：`取消`
- 保存按钮：`保存账号` / `保存更改` / `创建账号`

### 3. 侧边栏脚本 (src/single-window/renderer/sidebar.js)

**更改的错误消息：**
- `加载账号失败`
- `切换账号失败`
- `确定要删除账号"${accountName}"吗？\n\n这将删除账号配置但保留会话数据。`
- `删除账号失败`
- `账号"${getAccountName(accountId)}"已崩溃，请重新加载。`

### 4. UI 增强脚本 (src/single-window/renderer/uiEnhancements.js)

**更改的文本：**

#### 键盘快捷键帮助面板
- 帮助按钮提示：`键盘快捷键（按 ? 切换）`
- 面板标题：`键盘快捷键`
- 关闭按钮：`关闭`
- 快捷键说明：
  - `切换到账号 1-9`
  - `切换到下一个账号`
  - `切换到上一个账号`
  - `显示/隐藏此帮助面板`
  - `关闭此帮助面板`

### 5. 应用主脚本 (src/single-window/renderer/app.js)

**更改的通知消息：**
- `切换账号失败`

### 6. 迁移对话框 (src/single-window/renderer/migrationDialog.html)

**更改内容：**

#### 检测屏幕
- 页面标题：`配置迁移`
- 对话框标题：`检测到配置迁移`
- 说明文本：
  - `我们检测到您正在使用旧版本的多窗口 WhatsApp 桌面版。`
  - `新版本使用单窗口和侧边栏来更高效地管理您的所有账号。`
- 迁移内容标题：`将迁移以下内容：`
- 迁移项目：
  - `所有账号配置`
  - `账号名称和备注`
  - `每个账号的代理设置`
  - `翻译偏好设置`
  - `登录会话（无需重新扫描二维码）`
- 重要提示：`重要提示：迁移前将备份您的旧配置，如有需要可以恢复。`
- 按钮：`取消`、`开始迁移`

#### 进度屏幕
- 标题：`正在迁移配置`
- 状态文本：`准备迁移...`
- 提示：`正在迁移您的配置，请稍候。这可能需要几分钟时间。`
- 按钮：`取消`

#### 结果屏幕
- 标题：`迁移完成`
- 已迁移账号：`已迁移的账号：`
- 问题标题：`遇到的问题：`
- 警告标题：`警告：`
- 成功消息：
  - `您的配置已成功迁移！现在可以使用新的单窗口界面了。`
  - `旧配置已备份到：`
- 错误消息：`迁移过程中遇到错误。请检查上述详细信息并重试，或联系技术支持。`
- 按钮：`查看备份`、`继续使用应用`

### 7. 恢复界面 (src/single-window/renderer/recoveryUI.js)

**更改内容：**

#### 恢复对话框
- 对话框标题：`恢复选项`
- 关闭按钮：`关闭`
- 账号标签：`账号`

#### 恢复选项
1. **重新连接**
   - 标题：`重新连接`
   - 说明：`尝试重新连接到 WhatsApp Web，不会丢失数据。`
   - 按钮：`立即重新连接`

2. **恢复会话数据**
   - 标题：`恢复会话数据`
   - 说明：`尝试恢复损坏的会话数据。将创建备份。`
   - 按钮：`恢复会话`

3. **重置账号**
   - 标题：`重置账号`
   - 说明：`清除所有会话数据并重新开始。您需要重新扫描二维码。`
   - 按钮：`重置账号`

#### 状态消息
- 重新连接：
  - `正在尝试重新连接...`
  - `重新连接成功！`
  - `重新连接失败：`
- 恢复会话：
  - `正在恢复会话数据...`
  - `会话数据恢复成功！`
  - `备份已创建：`
  - `恢复失败：`
- 重置账号：
  - 确认对话框：`确定要重置"${accountName}"吗？\n\n这将：\n- 清除所有会话数据\n- 退出 WhatsApp 登录\n- 需要重新扫描二维码\n\n重置前将创建备份。`
  - `正在重置账号...`
  - `账号重置成功！`
  - `备份已创建：`
  - `重置失败：`
- 通用错误：`错误：`

### 8. 账号对话框脚本 (src/single-window/renderer/accountDialog.js)

**更改的文本：**

#### 对话框标题
- 添加模式：`添加账号`
- 编辑模式：`编辑账号`

#### 按钮文本
- 创建：`创建账号`
- 保存：`保存更改`

#### 错误消息
- `账号未找到`
- `加载账号数据失败`
- `账号名称为必填项`
- `账号名称不能超过 100 个字符`
- `启用代理时必须填写代理主机地址`
- `代理主机地址为必填项`
- `端口必须在 1 到 65535 之间`
- `代理端口必须在 1 到 65535 之间`
- `${engine} 需要 API 密钥`
- `${engine} 翻译引擎需要 API 密钥`

## 本地化范围

### 已完成
✅ 主界面 HTML
✅ 账号配置对话框 HTML
✅ 侧边栏 JavaScript 错误消息
✅ 账号对话框 JavaScript 错误消息和标签

### 新增完成
✅ 键盘快捷键帮助面板
✅ 迁移对话框界面
✅ 恢复界面
✅ 通知消息

### 未完成（如需要可继续）
- 错误显示组件（部分）
- 系统通知消息（部分）
- 菜单项（如果有）
- 托盘图标提示（如果有）

## 使用说明

应用程序现在将以中文显示主要用户界面元素。用户在以下场景中会看到中文：

1. **启动应用**：欢迎消息和空状态提示为中文
2. **添加账号**：所有表单标签、占位符和提示为中文
3. **编辑账号**：对话框标题和按钮为中文
4. **删除账号**：确认对话框为中文
5. **错误提示**：所有错误消息为中文

## 技术说明

### HTML 本地化
- 更改 `<html lang="en">` 为 `<html lang="zh-CN">`
- 更新所有静态文本内容
- 保持 HTML 结构和 CSS 类名不变

### JavaScript 本地化
- 更新 `textContent` 和 `innerText` 赋值
- 更新字符串字面量
- 更新 `confirm()` 和 `alert()` 消息
- 保持变量名和函数名为英文（代码可读性）

### 保持不变的内容
- CSS 类名和 ID
- JavaScript 变量名和函数名
- API 端点和事件名称
- 配置键名
- 日志消息（开发用）

## 测试建议

运行应用程序并验证：

1. ✅ 主界面显示中文
2. ✅ 添加账号对话框显示中文
3. ✅ 编辑账号对话框显示中文
4. ✅ 删除确认对话框显示中文
5. ✅ 所有错误消息显示中文
6. ✅ 表单验证消息显示中文
7. ✅ 占位符文本显示中文
8. ✅ 工具提示显示中文

## 后续改进建议

如果需要支持多语言切换，建议：

1. **创建语言文件**：
   - `locales/zh-CN.json`
   - `locales/en-US.json`

2. **实现 i18n 系统**：
   - 使用 `i18next` 或类似库
   - 动态加载语言文件
   - 提供语言切换功能

3. **用户设置**：
   - 添加语言选择选项
   - 保存用户语言偏好
   - 应用启动时加载用户语言

## 完成日期

2025-11-17

## 状态

✅ 基本中文本地化完成
✅ 主要用户界面已翻译
✅ 错误消息已翻译
✅ 可以正常使用
