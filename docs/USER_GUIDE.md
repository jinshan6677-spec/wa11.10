# WhatsApp 翻译功能用户指南

## 目录

- [功能概述](#功能概述)
- [快速开始](#快速开始)
- [基础功能](#基础功能)
- [高级功能](#高级功能)
- [翻译引擎配置](#翻译引擎配置)
- [常见问题](#常见问题)
- [故障排除](#故障排除)

---

## 功能概述

WhatsApp 翻译系统为您提供全面的聊天翻译功能，让您轻松与使用不同语言的联系人沟通。

### 主要功能

✅ **消息自动翻译** - 接收到的消息自动翻译成您的目标语言  
✅ **输入框翻译** - 发送前将您的消息翻译成对方的语言  
✅ **多引擎支持** - Google 翻译、GPT-4、Gemini、DeepSeek 等  
✅ **好友独立配置** - 为不同联系人设置不同的翻译规则  
✅ **禁发中文** - 防止意外发送中文给外语联系人  
✅ **实时翻译预览** - 输入时即时查看翻译结果  
✅ **反向翻译验证** - 验证翻译准确性  
✅ **智能缓存** - 提高翻译速度，减少 API 调用  

### 支持的翻译引擎

| 引擎 | 类型 | 特点 | 需要 API 密钥 |
|------|------|------|--------------|
| Google 翻译 | 传统翻译 | 快速、准确、免费 | ❌ 否 |
| GPT-4 | AI 翻译 | 支持翻译风格、上下文理解 | ✅ 是 |
| Gemini | AI 翻译 | Google AI、多语言支持 | ✅ 是 |
| DeepSeek | AI 翻译 | 高性价比、中文优化 | ✅ 是 |
| 自定义 API | 自定义 | 使用您自己的翻译服务 | ✅ 是 |

---

## 快速开始

### 1. 启用翻译功能

1. 启动 WhatsApp Desktop 应用
2. 等待 WhatsApp Web 加载完成
3. 点击右上角的 **🌐 翻译设置** 按钮
4. 在设置面板中启用 **自动翻译**

### 2. 基础配置

```
┌─────────────────────────────────┐
│      翻译设置                    │
├─────────────────────────────────┤
│ ☑ 自动翻译                      │
│                                 │
│ 翻译引擎: [Google 翻译 ▼]       │
│ 源语言:   [自动检测 ▼]          │
│ 目标语言: [中文简体 ▼]          │
│                                 │
│ ☐ 翻译群组消息                  │
│                                 │
│ [保存设置]                      │
└─────────────────────────────────┘
```

### 3. 开始使用

配置完成后，您将看到：
- 接收到的消息下方会显示翻译结果
- 输入框旁边会出现翻译按钮 🌐
- 翻译结果会自动缓存，提高速度

---

## 基础功能

### 消息自动翻译

当您启用自动翻译后，所有接收到的消息都会自动翻译。

#### 翻译结果显示

```
┌─────────────────────────────────┐
│ 👤 John                         │
│ Hello, how are you?             │
│                                 │
│ 🌐 en → zh-CN                   │
│ 你好，你好吗？                   │
└─────────────────────────────────┘
```

#### 配置选项

- **自动翻译开关**: 启用/禁用自动翻译
- **源语言**: 选择 "自动检测" 或指定语言
- **目标语言**: 您希望翻译成的语言
- **翻译群组消息**: 是否翻译群组中的消息

### 输入框翻译

在发送消息前翻译您的输入内容。

#### 使用步骤

1. 在输入框中输入您的消息（例如中文）
2. 点击输入框旁边的 **🌐 翻译** 按钮
3. 输入框内容会被替换为翻译结果
4. 点击发送按钮发送翻译后的消息

#### 示例

```
输入前: 你好，今天天气怎么样？
点击翻译按钮
输入后: Hello, how is the weather today?
```

### 翻译风格（仅 AI 引擎）

当使用 AI 翻译引擎（GPT-4、Gemini、DeepSeek）时，您可以选择翻译风格：

| 风格 | 适用场景 | 示例 |
|------|---------|------|
| 通用 | 日常对话 | 标准翻译 |
| 正式 | 商务沟通 | 使用正式用语 |
| 口语化 | 朋友聊天 | 轻松、自然的表达 |
| 亲切 | 亲密关系 | 温暖、友好的语气 |
| 幽默 | 轻松场合 | 添加幽默元素 |
| 礼貌 | 初次交流 | 礼貌、尊重的表达 |
| 强硬 | 严肃场合 | 坚定、直接的语气 |
| 简洁 | 快速沟通 | 简短、直接 |
| 激励 | 鼓励他人 | 积极、正面的表达 |
| 中立 | 客观陈述 | 不带情感色彩 |
| 专业 | 技术讨论 | 专业术语、准确表达 |

---

## 高级功能

### 好友独立翻译配置

为不同的联系人设置个性化的翻译规则。

#### 使用场景

- 与美国朋友聊天时翻译成英文
- 与日本客户沟通时翻译成日文
- 与中国同事聊天时不翻译

#### 配置步骤

1. 打开与联系人的聊天窗口
2. 点击 **🌐 翻译设置** 按钮
3. 启用 **好友独立翻译**
4. 为当前联系人配置：
   - 目标语言
   - 翻译引擎
   - 翻译风格
   - 禁发中文规则

#### 配置界面

```
┌─────────────────────────────────┐
│  好友独立翻译配置                │
├─────────────────────────────────┤
│ 联系人: John Smith              │
│                                 │
│ ☑ 启用独立配置                  │
│                                 │
│ 目标语言: [English ▼]           │
│ 翻译引擎: [GPT-4 ▼]             │
│ 翻译风格: [正式 ▼]              │
│                                 │
│ ☑ 禁发中文                      │
│                                 │
│ [保存配置]                      │
└─────────────────────────────────┘
```

### 禁发中文功能

防止意外发送中文消息给外语联系人。

#### 工作原理

1. 启用后，系统会检测输入框中的中文字符
2. 如果检测到中文，发送按钮会被禁用
3. 显示提示：**"检测到中文内容，请先翻译后再发送"**
4. 点击翻译按钮后才能发送

#### 配置级别

- **全局配置**: 对所有联系人生效
- **好友独立配置**: 仅对特定联系人生效

### 实时翻译预览

在输入时即时查看翻译结果，无需点击翻译按钮。

#### 使用方法

1. 在翻译设置中启用 **实时翻译**
2. 在输入框中输入内容
3. 停止输入 500 毫秒后，翻译预览会自动显示在输入框下方

#### 显示效果

```
┌─────────────────────────────────┐
│ 输入框:                         │
│ 你好，今天天气怎么样？           │
│                                 │
│ 🌐 实时翻译预览:                │
│ Hello, how is the weather today?│
└─────────────────────────────────┘
```

#### 性能优化

- 使用防抖技术，避免频繁请求
- 自动使用缓存，提高响应速度
- 可以随时禁用以节省 API 调用

### 反向翻译验证

验证翻译的准确性，避免误解。

#### 使用步骤

1. 在翻译设置中启用 **反向翻译**
2. 翻译输入框内容后，点击 **反向翻译** 按钮
3. 系统会将翻译结果翻译回原语言
4. 对比原文和反向翻译结果

#### 显示效果

```
┌─────────────────────────────────┐
│ 原文:                           │
│ 你好，今天天气怎么样？           │
│                                 │
│ 翻译结果:                       │
│ Hello, how is the weather today?│
│                                 │
│ 反向翻译:                       │
│ 你好，今天的天气怎么样？         │
│                                 │
│ ✅ 翻译准确度: 95%              │
└─────────────────────────────────┘
```

#### 准确度判断

- **90%+**: ✅ 翻译准确，可以放心发送
- **70-90%**: ⚠️ 翻译基本准确，建议检查
- **<70%**: ❌ 翻译可能有误，建议重新翻译

---

## 翻译引擎配置

### Google 翻译

Google 翻译是默认引擎，无需配置即可使用。

#### 特点

- ✅ 免费使用
- ✅ 快速响应
- ✅ 支持 100+ 语言
- ❌ 不支持翻译风格

#### 配置

无需配置，选择 "Google 翻译" 即可使用。

### GPT-4 翻译

OpenAI 的 GPT-4 模型，提供高质量的 AI 翻译。

#### 特点

- ✅ 支持翻译风格
- ✅ 上下文理解能力强
- ✅ 翻译自然流畅
- ❌ 需要 API 密钥
- ❌ 按使用量付费

#### 配置步骤

1. 获取 OpenAI API 密钥
   - 访问 https://platform.openai.com/api-keys
   - 创建新的 API 密钥
   - 复制密钥（格式：`sk-...`）

2. 在翻译设置中配置
   ```
   翻译引擎: GPT-4
   API 密钥: sk-xxxxxxxxxxxxxxxx
   API 端点: https://api.openai.com/v1/chat/completions
   模型: gpt-4
   ```

3. 点击 **测试连接** 验证配置

#### 费用说明

- GPT-4: ~$0.03 / 1K tokens
- GPT-4 Turbo: ~$0.01 / 1K tokens
- 一条消息约 50-200 tokens

### Gemini 翻译

Google 的 Gemini AI 模型。

#### 特点

- ✅ 支持翻译风格
- ✅ 多语言支持优秀
- ✅ 性价比高
- ❌ 需要 API 密钥

#### 配置步骤

1. 获取 Gemini API 密钥
   - 访问 https://makersuite.google.com/app/apikey
   - 创建新的 API 密钥

2. 在翻译设置中配置
   ```
   翻译引擎: Gemini
   API 密钥: AIzaSyxxxxxxxxxxxxxxxxxx
   模型: gemini-pro
   ```

3. 点击 **测试连接** 验证配置

### DeepSeek 翻译

DeepSeek 的 AI 模型，中文翻译效果优秀。

#### 特点

- ✅ 支持翻译风格
- ✅ 中文翻译优化
- ✅ 价格实惠
- ❌ 需要 API 密钥

#### 配置步骤

1. 获取 DeepSeek API 密钥
   - 访问 https://platform.deepseek.com/
   - 注册并创建 API 密钥

2. 在翻译设置中配置
   ```
   翻译引擎: DeepSeek
   API 密钥: sk-xxxxxxxxxxxxxxxx
   API 端点: https://api.deepseek.com/v1/chat/completions
   模型: deepseek-chat
   ```

3. 点击 **测试连接** 验证配置

### 自定义 API

使用您自己的翻译服务或其他兼容 OpenAI 格式的 API。

#### 配置步骤

1. 准备您的 API 信息
   - API 端点 URL
   - API 密钥
   - 模型名称

2. 在翻译设置中配置
   ```
   翻译引擎: 自定义 API
   API 密钥: your-api-key
   API 端点: https://your-api.com/v1/chat/completions
   模型: your-model-name
   ```

3. 点击 **测试连接** 验证配置

#### API 格式要求

您的 API 必须兼容 OpenAI Chat Completions 格式：

**请求格式**:
```json
{
  "model": "your-model",
  "messages": [
    {
      "role": "user",
      "content": "翻译提示词"
    }
  ]
}
```

**响应格式**:
```json
{
  "choices": [
    {
      "message": {
        "content": "翻译结果"
      }
    }
  ]
}
```

---

## 常见问题

### Q1: 翻译速度慢怎么办？

**A**: 翻译速度取决于多个因素：

1. **使用缓存**
   - 系统会自动缓存翻译结果
   - 相同内容第二次翻译会很快

2. **选择合适的引擎**
   - Google 翻译最快
   - AI 翻译稍慢但质量更好

3. **检查网络连接**
   - 确保网络稳定
   - 使用国内 API 端点（如 DeepSeek）

### Q2: 翻译不准确怎么办？

**A**: 提高翻译准确度的方法：

1. **使用 AI 翻译引擎**
   - GPT-4、Gemini 等 AI 引擎理解能力更强

2. **选择合适的翻译风格**
   - 根据场景选择正式、口语化等风格

3. **使用反向翻译验证**
   - 启用反向翻译功能检查准确度

4. **提供上下文**
   - 完整的句子比单词翻译更准确

### Q3: API 密钥安全吗？

**A**: 是的，我们采取了多重安全措施：

1. **加密存储**
   - 使用 Electron safeStorage 加密 API 密钥
   - 密钥不会以明文形式存储

2. **本地处理**
   - 所有翻译请求直接发送到翻译服务
   - 不经过第三方服务器

3. **安全传输**
   - 所有 API 请求使用 HTTPS
   - 验证 SSL 证书

### Q4: 翻译会消耗多少流量？

**A**: 流量消耗取决于使用情况：

- **Google 翻译**: 约 1-2 KB / 条消息
- **AI 翻译**: 约 2-5 KB / 条消息
- **缓存命中**: 0 KB（使用本地缓存）

**节省流量的方法**:
- 启用缓存（默认启用）
- 避免重复翻译相同内容
- 禁用实时翻译预览

### Q5: 可以离线使用吗？

**A**: 部分功能可以离线使用：

- ✅ 已缓存的翻译结果可以离线查看
- ❌ 新的翻译请求需要网络连接
- ❌ 所有翻译引擎都需要联网

### Q6: 支持哪些语言？

**A**: 支持的语言取决于翻译引擎：

- **Google 翻译**: 100+ 语言
- **GPT-4**: 50+ 主流语言
- **Gemini**: 40+ 语言
- **DeepSeek**: 20+ 语言（中文优化）

常用语言都支持，包括：
- 中文（简体/繁体）
- 英语
- 日语
- 韩语
- 法语
- 德语
- 西班牙语
- 俄语
- 阿拉伯语
- 等等...

### Q7: 群组消息会自动翻译吗？

**A**: 取决于您的配置：

- 默认情况下，群组消息**不会**自动翻译
- 您可以在设置中启用 **翻译群组消息**
- 建议根据群组语言情况决定是否启用

### Q8: 翻译历史会被保存吗？

**A**: 是的，但有限制：

- ✅ 翻译结果会缓存 7 天
- ✅ 缓存存储在本地，不上传云端
- ✅ 可以手动清除翻译缓存
- ❌ 不会永久保存翻译历史

### Q9: 可以同时使用多个翻译引擎吗？

**A**: 可以配置多个引擎，但每次只使用一个：

- 在设置中配置多个引擎的 API 密钥
- 选择当前使用的引擎
- 如果当前引擎失败，会自动切换到备用引擎

### Q10: 翻译会影响 WhatsApp 性能吗？

**A**: 影响很小：

- ✅ 使用异步处理，不阻塞界面
- ✅ 智能缓存减少重复请求
- ✅ 防抖技术避免频繁翻译
- ✅ 内存占用 < 50MB

---

## 故障排除

### 问题 1: 翻译按钮不显示

**可能原因**:
- WhatsApp Web 未完全加载
- 翻译脚本注入失败

**解决方法**:
1. 刷新页面（Ctrl+R 或 Cmd+R）
2. 重启应用
3. 检查控制台是否有错误信息

### 问题 2: 翻译请求失败

**可能原因**:
- API 密钥无效
- 网络连接问题
- API 服务不可用

**解决方法**:
1. 检查 API 密钥是否正确
2. 点击 **测试连接** 验证配置
3. 检查网络连接
4. 尝试切换到其他翻译引擎

### 问题 3: 翻译结果不显示

**可能原因**:
- 源语言和目标语言相同
- 消息内容为空或只有表情
- 翻译被缓存但显示失败

**解决方法**:
1. 检查语言配置
2. 确保消息包含文本内容
3. 清除翻译缓存后重试

### 问题 4: API 密钥提示无效

**可能原因**:
- 密钥格式错误
- 密钥已过期或被撤销
- API 端点配置错误

**解决方法**:
1. 重新复制 API 密钥，确保完整
2. 检查 API 端点 URL 是否正确
3. 在 API 提供商网站检查密钥状态
4. 创建新的 API 密钥

### 问题 5: 翻译速度很慢

**可能原因**:
- 网络延迟高
- API 服务响应慢
- 缓存未启用

**解决方法**:
1. 检查网络连接速度
2. 切换到更快的翻译引擎
3. 确保缓存功能已启用
4. 使用国内 API 端点（如 DeepSeek）

### 问题 6: 缓存占用空间过大

**可能原因**:
- 长期使用积累大量缓存
- 缓存清理未正常工作

**解决方法**:
1. 在设置中点击 **清除翻译缓存**
2. 手动删除缓存文件：
   - Windows: `%APPDATA%/whatsapp-desktop/translation/cache.db`
   - macOS: `~/Library/Application Support/whatsapp-desktop/translation/cache.db`
   - Linux: `~/.config/whatsapp-desktop/translation/cache.db`

### 问题 7: 禁发中文功能不工作

**可能原因**:
- 功能未启用
- 配置未保存
- 脚本注入失败

**解决方法**:
1. 确认在设置中启用了 **禁发中文**
2. 点击 **保存设置** 确保配置生效
3. 刷新页面或重启应用

### 问题 8: 实时翻译预览不显示

**可能原因**:
- 功能未启用
- 输入内容过短
- 防抖时间未到

**解决方法**:
1. 确认启用了 **实时翻译**
2. 输入至少 3 个字符
3. 停止输入等待 500 毫秒

### 获取更多帮助

如果以上方法无法解决您的问题：

1. **查看日志**
   - 打开开发者工具（F12）
   - 查看 Console 标签页的错误信息

2. **提交问题**
   - 访问项目 GitHub 页面
   - 创建 Issue 并提供详细信息：
     - 操作系统和版本
     - 应用版本
     - 错误信息截图
     - 复现步骤

3. **联系支持**
   - 发送邮件到支持邮箱
   - 附上日志文件和错误信息

---

## 使用技巧

### 技巧 1: 快速切换翻译引擎

为不同场景配置不同引擎：
- 日常聊天：Google 翻译（快速免费）
- 商务沟通：GPT-4（高质量）
- 中文翻译：DeepSeek（中文优化）

### 技巧 2: 利用翻译风格

根据对话对象选择合适的风格：
- 老板/客户：正式、专业
- 朋友：口语化、幽默
- 初次联系：礼貌、中立

### 技巧 3: 组合使用高级功能

- 启用 **好友独立配置** + **禁发中文** = 防止发错语言
- 启用 **实时翻译** + **反向翻译** = 确保翻译准确
- 使用 **翻译风格** + **AI 引擎** = 提升沟通效果

### 技巧 4: 优化性能

- 禁用不需要的功能（如实时翻译）
- 定期清理缓存
- 选择响应快的翻译引擎

### 技巧 5: 节省成本

- 优先使用 Google 翻译（免费）
- 启用缓存减少 API 调用
- 使用 DeepSeek（性价比高）

---

## 隐私和安全

### 数据隐私

- ✅ 所有翻译数据本地存储
- ✅ 不上传到第三方服务器（除翻译 API）
- ✅ 可以随时清除翻译历史
- ✅ 遵守 GDPR 等隐私法规

### API 密钥安全

- ✅ 使用系统级加密存储
- ✅ 不在日志中记录完整密钥
- ✅ 支持环境变量配置
- ✅ 传输使用 HTTPS 加密

### 内容安全

- ✅ 自动过滤 XSS 攻击
- ✅ HTML 转义翻译结果
- ✅ 限制翻译文本长度
- ✅ 验证 API 响应格式

---

## 更新日志

### v1.0.0 (2024-01-15)

- ✅ 消息自动翻译
- ✅ 输入框翻译
- ✅ 多引擎支持（Google、GPT-4、Gemini、DeepSeek）
- ✅ 好友独立配置
- ✅ 禁发中文功能
- ✅ 实时翻译预览
- ✅ 反向翻译验证
- ✅ 智能缓存系统
- ✅ 翻译风格支持

---

## 反馈和建议

我们欢迎您的反馈和建议！

- 📧 邮箱: support@example.com
- 🐛 Bug 报告: GitHub Issues
- 💡 功能建议: GitHub Discussions
- ⭐ 如果觉得有用，请给我们 Star！

---

**感谢使用 WhatsApp 翻译功能！**
