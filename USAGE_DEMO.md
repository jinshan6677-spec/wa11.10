# 多实例架构使用演示

## 快速开始

### 1. 启动应用

```bash
npm start
```

应用启动后会显示主管理界面。

### 2. 添加第一个账号

1. 点击 **"添加账号"** 按钮
2. 填写账号信息：
   - **账号名称**: 例如 "工作账号"
   - **代理设置** (可选):
     - 协议: SOCKS5 / HTTP / HTTPS
     - 主机: 127.0.0.1
     - 端口: 1080
   - **翻译设置**:
     - 启用翻译: ✓
     - 目标语言: 中文 (zh-CN)
     - 翻译引擎: Google / GPT-4 / Gemini / DeepSeek
3. 点击 **"保存"**

### 3. 启动账号实例

1. 在账号列表中找到刚创建的账号
2. 点击 **"启动"** 按钮
3. 等待浏览器窗口打开
4. 扫描 WhatsApp Web 二维码登录

### 4. 添加更多账号

重复步骤 2-3，可以添加多个账号。每个账号：
- 拥有独立的浏览器窗口
- 拥有独立的登录会话
- 可以配置不同的代理
- 可以配置不同的翻译设置

## 核心功能演示

### 账号管理

```javascript
// 账号配置示例
{
  "name": "工作账号",
  "proxy": {
    "enabled": true,
    "protocol": "socks5",
    "host": "127.0.0.1",
    "port": 1080,
    "username": "",  // 可选
    "password": ""   // 可选
  },
  "translation": {
    "enabled": true,
    "targetLanguage": "zh-CN",
    "engine": "google"
  },
  "autoStart": false,  // 是否开机自动启动
  "notifications": {
    "enabled": true,
    "sound": true
  }
}
```

### 实例操作

#### 启动实例
- 点击账号卡片上的 **"启动"** 按钮
- 或使用快捷键 `Ctrl+S` (在选中账号时)

#### 停止实例
- 点击账号卡片上的 **"停止"** 按钮
- 或直接关闭浏览器窗口
- 会话数据会自动保存

#### 重启实例
- 点击账号卡片上的 **"重启"** 按钮
- 用于应用新的配置或解决问题

#### 删除账号
- 点击账号卡片上的 **"删除"** 按钮
- 会同时删除账号配置和会话数据

### 代理配置

#### SOCKS5 代理示例
```javascript
{
  "enabled": true,
  "protocol": "socks5",
  "host": "127.0.0.1",
  "port": 1080
}
```

#### HTTP 代理示例
```javascript
{
  "enabled": true,
  "protocol": "http",
  "host": "proxy.example.com",
  "port": 8080,
  "username": "user",
  "password": "pass"
}
```

#### 不使用代理
```javascript
{
  "enabled": false
}
```

### 翻译配置

#### Google 翻译
```javascript
{
  "enabled": true,
  "engine": "google",
  "targetLanguage": "zh-CN"
}
```

#### GPT-4 翻译
```javascript
{
  "enabled": true,
  "engine": "gpt4",
  "targetLanguage": "zh-CN",
  "apiKey": "your-api-key"
}
```

#### Gemini 翻译
```javascript
{
  "enabled": true,
  "engine": "gemini",
  "targetLanguage": "zh-CN",
  "apiKey": "your-api-key"
}
```

#### DeepSeek 翻译
```javascript
{
  "enabled": true,
  "engine": "deepseek",
  "targetLanguage": "zh-CN",
  "apiKey": "your-api-key"
}
```

### 搜索和过滤

#### 按名称搜索
在搜索框中输入账号名称的部分内容，列表会自动过滤。

#### 按状态过滤
- **全部**: 显示所有账号
- **运行中**: 只显示正在运行的账号
- **已停止**: 只显示已停止的账号
- **错误**: 只显示有错误的账号

#### 排序
- **按名称**: A-Z 排序
- **按状态**: 运行中 > 已停止 > 错误
- **按最后活跃时间**: 最近活跃的在前

### 通知功能

#### 新消息通知
- 当账号收到新消息时，会显示系统通知
- 账号卡片上会显示未读消息徽章
- 托盘图标会显示总未读数

#### 点击通知
点击通知会自动聚焦到对应的账号窗口。

### 系统托盘

#### 托盘菜单
- **显示/隐藏主窗口**: 切换主窗口显示状态
- **账号列表**: 快速访问各个账号
- **退出**: 关闭所有实例并退出应用

#### 最小化到托盘
关闭主窗口时，应用会最小化到系统托盘继续运行。

## 高级功能

### 会话持久化

账号登录后，会话数据会自动保存。下次启动时：
1. 如果会话有效，自动登录
2. 如果会话过期，显示二维码重新登录

#### 手动清除会话
1. 右键点击账号卡片
2. 选择 **"清除会话数据"**
3. 下次启动需要重新扫码登录

### 窗口状态保存

每个账号的窗口位置和大小会自动保存：
- 窗口位置 (x, y)
- 窗口大小 (width, height)
- 最小化/最大化状态

### 资源监控

应用会实时监控系统资源：
- **内存使用**: 显示当前内存使用百分比
- **CPU 使用**: 显示当前 CPU 使用百分比
- **实例数量**: 显示运行中的实例数量

当资源使用接近限制时，会显示警告。

### 自动启动

可以为每个账号配置自动启动：
1. 编辑账号配置
2. 启用 **"开机自动启动"**
3. 下次应用启动时，该账号会自动启动

### 批量操作

#### 启动所有账号
点击工具栏的 **"启动全部"** 按钮。

#### 停止所有账号
点击工具栏的 **"停止全部"** 按钮。

### 导出/导入配置

#### 导出配置
1. 点击 **"设置"** > **"导出配置"**
2. 选择保存位置
3. 所有账号配置会保存为 JSON 文件

#### 导入配置
1. 点击 **"设置"** > **"导入配置"**
2. 选择之前导出的 JSON 文件
3. 选择是否覆盖现有账号

## 故障排除

### 实例无法启动

**可能原因:**
1. 代理配置错误
2. 端口被占用
3. 系统资源不足

**解决方法:**
1. 检查代理设置是否正确
2. 重启应用
3. 关闭其他不必要的程序

### 会话频繁过期

**可能原因:**
1. 代理 IP 频繁变化
2. WhatsApp 安全检测

**解决方法:**
1. 使用固定 IP 的代理
2. 避免频繁切换代理
3. 保持账号活跃

### 翻译不工作

**可能原因:**
1. 翻译引擎 API 配置错误
2. 网络连接问题
3. API 配额用尽

**解决方法:**
1. 检查 API Key 是否正确
2. 检查网络连接
3. 切换到其他翻译引擎

### 内存占用过高

**解决方法:**
1. 减少同时运行的实例数量
2. 定期重启长时间运行的实例
3. 关闭不需要的账号

## 最佳实践

### 1. 代理配置
- 为每个账号使用不同的代理 IP
- 使用稳定的代理服务
- 定期检查代理连接状态

### 2. 账号管理
- 使用有意义的账号名称
- 定期备份账号配置
- 为重要账号启用自动启动

### 3. 资源优化
- 不要同时运行过多实例
- 关闭不活跃的账号
- 定期清理会话数据

### 4. 安全建议
- 不要在公共网络使用
- 定期更换代理
- 保护好 API Keys

## 性能指标

### 推荐配置
- **CPU**: 4 核心或以上
- **内存**: 8GB 或以上
- **硬盘**: SSD 推荐

### 实例数量建议
- **8GB 内存**: 最多 10 个实例
- **16GB 内存**: 最多 20 个实例
- **32GB 内存**: 最多 30+ 个实例

### 单实例资源占用
- **内存**: 约 200-400MB
- **CPU**: 空闲时 < 5%，活跃时 10-20%
- **硬盘**: 约 50-100MB (会话数据)

## 快捷键

- `Ctrl+N`: 添加新账号
- `Ctrl+S`: 启动选中的账号
- `Ctrl+Q`: 停止选中的账号
- `Ctrl+R`: 重启选中的账号
- `Ctrl+F`: 聚焦搜索框
- `Ctrl+W`: 关闭主窗口
- `Ctrl+Q`: 退出应用

## 技术支持

如有问题，请查看：
- 错误日志: `%APPDATA%/whatsapp-desktop-translation/logs/`
- 配置文件: `%APPDATA%/Electron/accounts.json`
- 会话数据: `%APPDATA%/Electron/profiles/`

---

**提示**: 首次使用建议先添加 1-2 个账号测试，确认功能正常后再添加更多账号。
